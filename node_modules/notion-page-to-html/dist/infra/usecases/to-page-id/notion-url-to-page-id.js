"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NotionUrlToPageId = void 0;
var url_validator_1 = require("./url-validator");
var NotionUrlToPageId = /** @class */ (function () {
    function NotionUrlToPageId(url, idNormalizer) {
        this._url = url;
        this._idNormalizer = idNormalizer;
    }
    NotionUrlToPageId.prototype.toPageId = function () {
        var urlError = new url_validator_1.UrlValidor(this._url).validate();
        if (urlError)
            throw urlError;
        return this._idNormalizer.normalizeId(this._ununormalizedPageId);
    };
    Object.defineProperty(NotionUrlToPageId.prototype, "_ununormalizedPageId", {
        get: function () {
            var tail = this._url.split('/').reverse()[0];
            if (tail.split('-').length === 0)
                return tail;
            return tail.split('-').reverse()[0];
        },
        enumerable: false,
        configurable: true
    });
    return NotionUrlToPageId;
}());
exports.NotionUrlToPageId = NotionUrlToPageId;
//# sourceMappingURL=notion-url-to-page-id.js.map